<!-- Header de la página -->
<div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">Registro de Empleado</h1>
    <p class="text-gray-600">Complete la información del nuevo empleado del IEBEM</p>
</div>

<!-- Formulario -->
<form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="space-y-8">

    <!-- Sección: Información Personal -->
    <div class="bg-white rounded-2xl border border-gray-100 p-6">
        <div class="flex items-center mb-6">
            <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center mr-3">
                <i class="fas fa-user text-blue-600"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800">Información Personal</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Nombre -->
            <app-input label="Nombre(s)" type="text" placeholder="Ingrese el nombre" icon="user" [required]="true"
                formControlName="firstName" [error]="getFieldError('firstName')"
                hint="Nombre completo del empleado"></app-input>

            <!-- Apellidos -->
            <app-input label="Apellidos" type="text" placeholder="Ingrese los apellidos" icon="user" [required]="true"
                formControlName="lastName" [error]="getFieldError('lastName')"></app-input>

            <!-- Email -->
            <app-input label="Correo Electrónico" type="email" placeholder="correo@iebem.edu.mx" icon="envelope"
                [required]="true" formControlName="email" [error]="getFieldError('email')"
                hint="Email institucional del empleado"></app-input>

            <!-- Teléfono -->
            <app-masked-input label="Teléfono" type="number" maskType="phone" placeholder="(777) 123-4567" icon="phone"
                [required]="true" formControlName="phone" [error]="getFieldError('phone')"></app-masked-input>

            <!-- CURP -->
            <app-masked-input label="CURP" maskType="curp" placeholder="CURP180901HPLXXX09" icon="id-card"
                [required]="true" formControlName="curp" [error]="getFieldError('curp')"></app-masked-input>

            <!-- RFC -->
            <app-masked-input label="RFC" maskType="rfc" placeholder="XAXX010101000" icon="id-badge" [required]="true"
                formControlName="rfc" [error]="getFieldError('rfc')"></app-masked-input>

            <!-- Género SIN búsqueda -->
            <app-modern-select label="Género" placeholder="Seleccione el género" [options]="genderOptions"
                [required]="true" formControlName="gender" [error]="getFieldError('gender')"></app-modern-select>

            <!-- Fecha de Nacimiento -->
            <app-input label="Fecha de Nacimiento" type="date" [required]="true" formControlName="birthDate"
                dateFormat="DD/MM/AAAA" [error]="getFieldError('birthDate')"></app-input>
        </div>
    </div>

    <!-- Sección: Información Laboral -->
    <div class="bg-white rounded-2xl border border-gray-100 p-6">
        <div class="flex items-center mb-6">
            <div class="w-10 h-10 bg-iebem-primary bg-opacity-10 rounded-xl flex items-center justify-center mr-3">
                <i class="fas fa-briefcase text-iebem-primary"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800">Información Laboral</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Departamento CON búsqueda -->
            <app-modern-select label="Departamento" placeholder="Seleccione el departamento"
                [options]="departmentOptions" [required]="true" [searchable]="true" formControlName="department"
                [error]="getFieldError('department')" hint="Área de trabajo del empleado"></app-modern-select>

            <!-- Puesto CON búsqueda -->
            <app-modern-select label="Puesto" placeholder="Seleccione el puesto" [options]="positionOptions"
                [required]="true" [searchable]="true" formControlName="position"
                [error]="getFieldError('position')"></app-modern-select>

            <!-- Salario -->
            <app-input label="Salario Mensual" type="number" placeholder="15000" icon="dollar-sign" [required]="true"
                formControlName="salary" [error]="getFieldError('salary')"
                hint="Salario base mensual en pesos mexicanos"></app-input>

            <!-- Fecha de Contratación -->
            <app-input label="Fecha de Contratación" type="date" [required]="true" formControlName="hireDate"
                dateFormat="DD/MM/AAAA" [error]="getFieldError('hireDate')"></app-input>
        </div>
    </div>

    <!-- Sección: Dirección -->
    <div class="bg-white rounded-2xl border border-gray-100 p-6">
        <div class="flex items-center mb-6">
            <div class="w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center mr-3">
                <i class="fas fa-map-marker-alt text-purple-600"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800">Dirección</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Calle y Número -->
            <div class="md:col-span-2">
                <app-input label="Calle y Número" placeholder="Av. Plan de Ayala No. 456" icon="home" [required]="true"
                    formControlName="street" [error]="getFieldError('street')"></app-input>
            </div>

            <!-- Código Postal -->
            <app-masked-input label="Código Postal" maskType="postal" placeholder="62000" icon="mail-bulk"
                [required]="true" formControlName="postalCode" [error]="getFieldError('postalCode')"></app-masked-input>

            <!-- Ciudad -->
            <app-input label="Ciudad" placeholder="Cuernavaca" icon="city" [required]="true" formControlName="city"
                [error]="getFieldError('city')"></app-input>

            <!-- Estado CON búsqueda -->
            <app-modern-select label="Estado" placeholder="Seleccione el estado" [options]="stateOptions"
                [required]="true" [searchable]="true" formControlName="state"
                [error]="getFieldError('state')"></app-modern-select>
        </div>
    </div>

    <!-- Sección: Contacto de Emergencia -->
    <div class="bg-white rounded-2xl border border-gray-100 p-6">
        <div class="flex items-center mb-6">
            <div class="w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center mr-3">
                <i class="fas fa-exclamation-triangle text-red-600"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800">Contacto de Emergencia</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Nombre del Contacto -->
            <app-input label="Nombre del Contacto" placeholder="María García López" icon="user-friends"
                [required]="true" formControlName="emergencyContact"
                [error]="getFieldError('emergencyContact')"></app-input>

            <!-- Teléfono de Emergencia -->
            <app-masked-input label="Teléfono de Emergencia" maskType="phone" placeholder="(777) 987-6543"
                icon="phone-alt" [required]="true" formControlName="emergencyPhone"
                [error]="getFieldError('emergencyPhone')"></app-masked-input>
        </div>
    </div>

    <!-- Sección: Documentos -->
    <div class="bg-white rounded-2xl border border-gray-100 p-6">
        <div class="flex items-center mb-6">
            <div class="w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center mr-3">
                <i class="fas fa-file-upload text-orange-600"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800">Documentos</h2>
        </div>

        <app-file-upload label="Subir Documentos" [multiple]="true" accept=".pdf,.doc,.docx,.jpg,.png"
            hint="PDF, DOC, DOCX, JPG, PNG hasta 10MB por archivo"
            (filesSelected)="onFilesSelected($event)"></app-file-upload>
    </div>

    <!-- Botones de Acción -->
    <div class="flex flex-col sm:flex-row gap-4 justify-end bg-gray-50 p-6 rounded-2xl">
        <button type="button"
            class="px-6 py-3 border border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-gray-100 transition-colors duration-200"
            (click)="onReset()" [disabled]="isSubmitting">
            <i class="fas fa-undo mr-2"></i>
            Limpiar Formulario
        </button>

        <button type="submit"
            class="px-8 py-3 bg-iebem-primary text-white rounded-xl font-medium hover:bg-iebem-dark transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
            [disabled]="employeeForm.invalid || isSubmitting">
            <i [class]="isSubmitting ? 'fas fa-spinner fa-spin mr-2' : 'fas fa-save mr-2'"></i>
            {{ isSubmitting ? 'Guardando...' : 'Registrar Empleado' }}
        </button>
    </div>

</form>