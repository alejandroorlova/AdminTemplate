<div class="w-full relative">
    <app-form-field [label]="label" [controlId]="id" [error]="error" [hint]="hint" [required]="required" [touched]="touched" [empty]="!value">
        <div class="relative">
            <!-- Input normal -->
            <input #inputElement 
                [id]="id" 
                [type]="getInputType()" 
                [placeholder]="getPlaceholderText()"
                [disabled]="disabled" 
                [readonly]="readonly" 
                [class]="inputClasses" 
                [attr.aria-describedby]="id + '-error ' + id + '-hint'"
                [attr.aria-labelledby]="id + '-label'"
                [value]="value"
                (input)="onInput($event)" 
                (blur)="onBlur()" 
                (focus)="onFocus()" />

            <!-- Ícono izquierdo -->
            <div *ngIf="icon" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i [class]="'fas fa-' + icon + ' text-gray-400'"></i>
            </div>

            <!-- Ícono derecho (para inputs normales) -->
            <div *ngIf="suffixIcon && type !== 'password'" class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <i [class]="'fas fa-' + suffixIcon + ' text-gray-400'"></i>
            </div>

            <!-- Toggle de contraseña -->
            <div *ngIf="type === 'password'" class="absolute inset-y-0 right-0 pr-3 flex items-center">
                <button type="button"
                    class="text-gray-400 hover:text-gray-600 transition-colors duration-200 cursor-pointer focus:outline-none focus:ring-2 focus:ring-iebem-primary focus:ring-offset-2 rounded-sm"
                    (click)="togglePasswordVisibility()"
                    [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'" 
                    tabindex="0">
                    <i [class]="'fas fa-' + (showPassword ? 'eye-slash' : 'eye')"></i>
                </button>
            </div>
        </div>
    </app-form-field>
</div>
